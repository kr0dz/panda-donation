<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rifa solidaria — Apoyemos a Panda</title>
  <meta name="description"
    content="Rifa solidaria para apoyar a Panda. Participa con tu donación y entra al sorteo de estancias en hoteles." />

  <!-- Open Graph (WhatsApp/Facebook) -->
  <meta property="og:title" content="Rifa solidaria — Apoyemos a Panda" />
  <meta property="og:description"
    content="1 boleto = $500 MXN. Premios: 2 noches Casa Azul, 2 noches Hotel Casa Morena, 1 noche en Guanajuato (por confirmar). Fechas: 14–15 febrero." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://kr0dz.github.io/panda-donation/assets/cover.webp" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">

  <!-- Tu CSS -->
  <link rel="stylesheet" href="./css/styles.css">
</head>

<body>
  <header class="topbar py-3">
    <div class="container-xxl">
      <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
        <div class="d-flex align-items-center gap-2 flex-wrap">
          <span class="pill"><span class="dot"></span> Rifa solidaria</span>
          <span class="pill">1 boleto = <b>$500 MXN</b></span>
          <span class="pill">Fechas premio: <b>14–15 Feb</b></span>
        </div>
        <div class="d-flex gap-2 flex-wrap">
          <a class="btn btn-outline-primary btn-sm" href="#premios">Premios</a>
          <a class="btn btn-outline-primary btn-sm" href="#top">Top donadores</a>
          <a class="btn btn-outline-primary btn-sm" href="#validadas">Validadas</a>
          <a class="btn btn-primary btn-sm" href="#participar">Participar</a>
        </div>
      </div>
    </div>
  </header>

  <main class="py-4 pb-5">
    <div class="container-xxl">

      <div class="row g-4 align-items-stretch">
        <div class="col-lg-7 fadeUp d1">
          <div class="cardX p-3 p-md-4 h-100">
            <div class="hero mb-3">
              <img src="assets/cover.webp" alt="Portada de la campaña">
              <div class="trustBadge">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M12 2l7 4v6c0 5-3 9-7 10C8 21 5 17 5 12V6l7-4Z" stroke="#0b1220" stroke-width="1.5" />
                  <path d="M9.2 12.2l1.8 1.8 3.8-4" stroke="#16a34a" stroke-width="1.8" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
                Página informativa · validación manual
              </div>
            </div>

            <h1 class="title display-6 mb-2">Rifa solidaria — Apoyemos a Panda</h1>
            <p class="muted mb-3" style="line-height:1.7">
              Esta página existe para dar contexto y organizar la rifa de forma clara.
              <b>La participación cuenta sólo con donación validada</b>.
              Más abajo puedes ver premios, reglas, progreso y donaciones validadas.
            </p>

            <div class="row g-2">
              <div class="col-md-4">
                <div class="kpi">
                  <div class="t">Meta</div>
                  <div class="v" id="goalLabel">$500,000 MXN</div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="kpi">
                  <div class="t">Recaudado (validadas)</div>
                  <div class="v" id="raisedLabel">$0 MXN</div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="kpi">
                  <div class="t">Boletos (validadas)</div>
                  <div class="v" id="ticketsLabel">0</div>
                </div>
              </div>
            </div>

            <div class="mt-3">
              <div class="d-flex align-items-center justify-content-between mb-1">
                <div class="muted small">Progreso hacia la meta (según validadas)</div>
                <div class="muted small"><span id="pctLabel">0%</span></div>
              </div>
              <div class="progress" role="progressbar" aria-label="Progreso" style="height:12px; border-radius:999px;">
                <div id="progressBar" class="progress-bar" style="width:0%"></div>
              </div>
              <div class="muted small mt-2">
                El contador sube cuando se valida la evidencia. Así protegemos a todos los participantes.
              </div>
            </div>

            <div class="divider"></div>

            <div class="d-flex gap-2 flex-wrap" id="participar">
              <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalRegistro">
                Participar / Registrar donación
              </button>
              <a class="btn btn-outline-primary" href="#premios">Ver premios</a>
              <a class="btn btn-outline-primary" href="#reglas">Reglas</a>
              <a class="btn btn-outline-primary" href="#top">Top donadores</a>
            </div>

            <div class="mt-3 muted small">
              Transparencia: la lista pública muestra donaciones validadas (nombre abreviado recomendado).
            </div>
          </div>
        </div>

        <div class="col-lg-5 fadeUp d2">
          <div class="stickySide">
            <div class="cardX p-3 p-md-4">
              <h2 class="h5 mb-2" style="font-weight:900;">Cómo participar</h2>

              <div class="soft p-3 mb-3">
                <div class="d-flex justify-content-between align-items-start gap-3 flex-wrap">
                  <div>
                    <div class="muted small mb-1">Donación por transferencia (BBVA)</div>
                    <div class="mono" style="font-weight:900; font-size:1.05rem;">4152 3145 6104 1529</div>
                    <div class="muted small mt-1">Titular: <b>Ramón Fabián Palacios García</b></div>
                    <div class="mt-2">
                      <span class="chip">Sugerencia concepto: <b>RIFA PANDA</b></span>
                    </div>
                  </div>
                  <button class="btn btn-outline-primary btn-sm" onclick="copyText('4152314561041529')">Copiar</button>
                </div>
              </div>

              <div class="soft p-3 mb-3">
                <div class="muted small mb-2"><b>Validación de evidencia</b></div>
                <div class="small" style="line-height:1.7">
                  Envía tu comprobante y tu nombre al WhatsApp:
                  <b>+52 1 415 215 7587</b><br>
                  o por correo: <b>hbcasamorena@gmail.com</b>
                </div>
              </div>

              <div class="d-grid gap-2">
                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalRegistro">
                  Abrir registro
                </button>
                <button class="btn btn-outline-primary" onclick="openShare()">
                  Compartir campaña
                </button>
              </div>

              <div class="mt-3 muted small">
                Este sitio no cobra ni procesa pagos: organiza la rifa, registra participantes y muestra donaciones
                validadas.
              </div>
            </div>

            <div class="cardX p-3 p-md-4 mt-3">
              <h2 class="h6 mb-2" style="font-weight:900;">Uso de los fondos</h2>
              <div class="soft p-3">
                <ul class="mb-0 small" style="line-height:1.7">
                  <li>Consultas y seguimiento médico</li>
                  <li>Estudios y tratamientos</li>
                  <li>Medicamentos</li>
                  <li>Traslados y logística</li>
                </ul>
              </div>
            </div>

          </div>
        </div>
      </div>

      <section id="premios" class="mt-4 fadeUp d3">
        <div class="cardX p-3 p-md-4">
          <div class="d-flex align-items-end justify-content-between flex-wrap gap-2">
            <div>
              <h2 class="h4 mb-1" style="font-weight:900;">Premios</h2>
              <p class="muted mb-0">Válidos para <b>14–15 de febrero</b>. (El 3er premio se confirma pronto.)</p>
            </div>
            <span class="pill">Premios reales · validación de ganador</span>
          </div>

          <div class="row g-3 mt-2">
            <div class="col-lg-4">
              <div class="soft p-3 h-100">
                <div class="prizeImg mb-3">
                  <img src="casa-azul/0fe1beb8-b9a1-4331-ae35-9d547df79844.avif" alt="Casa Azul">
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="muted small">1er premio</div>
                  <span class="badge text-bg-success">2 noches</span>
                </div>
                <h3 class="h5 mt-2 mb-1" style="font-weight:900;">Casa Azul</h3>
                <p class="muted small mb-2">Estancia 2 noches (14–15 feb). Sujeto a políticas del anfitrión.</p>
                <a class="btn btn-outline-primary w-100" target="_blank" rel="noopener"
                  href="https://www.airbnb.mx/rooms/935670103045137368?viralityEntryPoint=1&s=76">Ver alojamiento</a>
              </div>
            </div>

            <div class="col-lg-4">
              <div class="soft p-3 h-100">
                <div class="prizeImg mb-3">
                  <img src="hotel-casa-morena/hotelcasamorena.avif" alt="Hotel Casa Morena">
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="muted small">2do premio</div>
                  <span class="badge text-bg-primary">2 noches</span>
                </div>
                <h3 class="h5 mt-2 mb-1" style="font-weight:900;">Hotel Casa Morena (San Miguel)</h3>
                <p class="muted small mb-2">Estancia 2 noches (14–15 feb). Confirmación final al ganador.</p>
                <a class="btn btn-outline-primary w-100" target="_blank" rel="noopener"
                  href="https://www.airbnb.mx/rooms/1470676662423815389?viralityEntryPoint=1&s=76">Ver alojamiento</a>
              </div>
            </div>

            <div class="col-lg-4">
              <div class="soft p-3 h-100">
                <div class="prizeImg mb-3">
                  <img src="casa-azul/2e5ec738-1fee-45f1-ab0b-895dc97f8cd0.avif"
                    alt="Hotel Guanajuato (por confirmar)">
                </div>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="muted small">3er premio</div>
                  <span class="badge text-bg-warning">1 noche</span>
                </div>
                <h3 class="h5 mt-2 mb-1" style="font-weight:900;">Hotel en Guanajuato</h3>
                <p class="muted small mb-2">1 noche (por confirmar). Se publican detalles en cuanto esté listo.</p>
                <button class="btn btn-outline-primary w-100" disabled>Por confirmar</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="reglas" class="mt-4">
        <div class="cardX p-3 p-md-4">
          <h2 class="h4 mb-2" style="font-weight:900;">Reglas claras</h2>
          <div class="soft p-3">
            <ul class="mb-0 small" style="line-height:1.8">
              <li><b>1 boleto = $500 MXN</b>. Boletos = <b>monto / 500</b> (redondeo hacia abajo).</li>
              <li>La participación cuenta <b>cuando la donación está validada</b> (comprobante + datos).</li>
              <li>El ganador debe <b>comprobar identidad</b> y coincidencia con el comprobante.</li>
              <li>Premios válidos para <b>14–15 de febrero</b>. (3er premio por confirmar.)</li>
              <li>Si se detecta duplicado o fraude, se puede anular folio con evidencia.</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="top" class="mt-4">
        <div class="cardX p-3 p-md-4">
          <div class="d-flex justify-content-between align-items-end flex-wrap gap-2">
            <div>
              <h2 class="h4 mb-1" style="font-weight:900;">Top donadores</h2>
              <p class="muted mb-0">Reconocimiento público a quienes más aportan (según donaciones validadas).</p>
            </div>
            <span class="pill">Incentivo extra</span>
          </div>

          <div class="divider"></div>

          <div class="row g-3">
            <div class="col-lg-6">
              <div class="soft p-3 h-100">
                <div class="muted small mb-2"><b>Top 10</b> por monto total</div>
                <div class="table-responsive">
                  <table class="table align-middle mb-0">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Nombre</th>
                        <th>Monto</th>
                        <th>Boletos</th>
                      </tr>
                    </thead>
                    <tbody id="tbodyTop">
                      <tr>
                        <td colspan="4" class="muted">Cargando…</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="muted small mt-2">
                  Nota: el sorteo sigue siendo aleatorio, pero este ranking es un incentivo adicional.
                </div>
              </div>
            </div>

            <div class="col-lg-6">
              <div class="soft p-3 h-100">
                <div class="muted small mb-2"><b>¿Cómo se calcula?</b></div>
                <ul class="mb-0 small" style="line-height:1.8">
                  <li>Se suman montos por nombre (recomendado: abreviar, ej. “Luis G.”).</li>
                  <li>Los boletos provienen de donaciones validadas.</li>
                  <li>Si hay varias donaciones del mismo nombre, se acumulan.</li>
                </ul>
              </div>
            </div>
          </div>

        </div>
      </section>

      <section id="validadas" class="mt-4">
        <div class="cardX p-3 p-md-4">
          <div class="d-flex justify-content-between align-items-end flex-wrap gap-2">
            <div>
              <h2 class="h4 mb-1" style="font-weight:900;">Donaciones validadas</h2>
              <p class="muted mb-0">Lista pública de donaciones validadas.</p>
            </div>
            <span class="pill">Transparencia</span>
          </div>

          <div class="divider"></div>

          <div class="table-responsive">
            <table class="table align-middle">
              <thead>
                <tr>
                  <th>Folio</th>
                  <th>Nombre</th>
                  <th>Monto</th>
                  <th>Boletos</th>
                  <th>Fecha</th>
                  <th class="text-end">Estado</th>
                </tr>
              </thead>
              <tbody id="tbodyValidadas">
                <tr>
                  <td colspan="6" class="muted">Cargando…</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="muted small">
            Privacidad sugerida: usar nombre abreviado (ej. “Luis G.”) y folio completo.
          </div>
        </div>
      </section>

      <section id="share" class="mt-4">
        <div class="cardX p-3 p-md-4">
          <div class="row g-3">
            <div class="col-lg-6">
              <h2 class="h5 mb-2" style="font-weight:900;">Compartir</h2>
              <div class="soft p-3">
                <div class="d-flex gap-2 flex-wrap">
                  <a class="btn btn-outline-primary" id="btnWA" target="_blank" rel="noopener">WhatsApp</a>
                  <a class="btn btn-outline-primary" id="btnFB" target="_blank" rel="noopener">Facebook</a>
                  <a class="btn btn-outline-primary" id="btnX" target="_blank" rel="noopener">X</a>
                </div>
                <div class="divider"></div>
                <div class="d-flex gap-2">
                  <input id="shareLink" class="form-control" readonly>
                  <button class="btn btn-primary" onclick="copyShare()">Copiar</button>
                </div>
                <div class="muted small mt-2">
                  WhatsApp toma la imagen desde <b>og:image</b>. Por eso es URL absoluta.
                </div>
              </div>
            </div>

            <div class="col-lg-6">
              <h2 class="h6 mb-2" style="font-weight:900;">Contacto</h2>
              <div class="soft p-3 small" style="line-height:1.7">
                Evidencia por WhatsApp: <b>+52 1 415 215 7587</b><br>
                Correo: <b>hbcasamorena@gmail.com</b>
              </div>
            </div>

          </div>
        </div>
      </section>

      <footer class="py-4 muted small text-center">
        © <span id="year"></span> — Rifa solidaria
      </footer>

    </div>
  </main>

  <!-- Modal registro -->
  <div class="modal fade" id="modalRegistro" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content" style="border-radius:20px;">
        <div class="modal-header">
          <h5 class="modal-title" style="font-weight:900;">Registrar donación (para asignar boletos)</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
        </div>
        <div class="modal-body">
          <div class="soft p-3 mb-3">
            <div class="muted small mb-1">Donación a BBVA</div>
            <div class="mono" style="font-weight:900;">4152 3145 6104 1529</div>
            <div class="muted small mt-1">Titular: <b>Ramón Fabián Palacios García</b></div>
          </div>

          <div class="mb-2">
            <label class="form-label">Nombre completo</label>
            <input class="form-control" id="fName" placeholder="Nombre y apellido">
          </div>

          <div class="row g-2">
            <div class="col-md-6">
              <label class="form-label">WhatsApp</label>
              <input class="form-control" id="fWhatsapp" placeholder="+52...">
            </div>
            <div class="col-md-6">
              <label class="form-label">Correo</label>
              <input class="form-control" id="fEmail" placeholder="correo@...">
            </div>
          </div>

          <div class="mt-2 mb-2">
            <label class="form-label">Monto donado (MXN)</label>
            <input class="form-control" id="fAmount" inputmode="numeric" placeholder="Ej. 500, 1000, 1500">
            <div class="muted small mt-1">Boletos = monto / 500 (ej. $1500 → 3 boletos)</div>
          </div>

          <div class="mb-2">
            <label class="form-label">Nota (opcional)</label>
            <input class="form-control" id="fNote" placeholder="Ej. Transferencia realizada hoy, referencia ...">
          </div>

          <div class="form-check mt-2">
            <input class="form-check-input" type="checkbox" id="fOk">
            <label class="form-check-label small" for="fOk">
              Confirmo que enviaré evidencia por WhatsApp (<b>+52 1 415 215 7587</b>) o correo
              (<b>hbcasamorena@gmail.com</b>).
            </label>
          </div>

          <div class="soft p-3 mt-3">
            <div class="muted small mb-1">Después de registrar</div>
            <div class="small" style="line-height:1.7">
              1) Envía tu comprobante por WhatsApp o correo.<br>
              2) Se valida y se agrega a la lista de “donaciones validadas”.<br>
              3) El sorteo se realiza desde el dashboard del admin.
            </div>
          </div>

          <div class="mt-3" id="regResult" style="display:none;"></div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline-primary" data-bs-dismiss="modal">Cerrar</button>
          <button class="btn btn-primary" id="btnSend" onclick="submitRegistration()">Registrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS (para el modal) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Tu JS -->
  <script src="./js/script.js" defer></script>
</body>

</html>
